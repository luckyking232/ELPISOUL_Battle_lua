模块概览
1. BattleBuff.lua
核心功能：战斗Buff实体管理
实现Buff的创建、更新、移除机制
处理Buff效果叠加、属性计算、触发条件检测
包含护盾、韧性、持续伤害等特殊效果处理
关键类：buff（Buff实例）
2. BattleBuffEffect.lua
核心功能：Buff效果系统
解析Buff效果配置字符串
计算效果数值（基于属性百分比、固定值等）
处理特殊效果逻辑（如伤害吸收、治疗效果加成）
关键函数：GetEffectValue（效果值计算）
3. BattleBuffMgr.lua
核心功能：Buff全局管理
维护所有Buff实例的注册表
处理Buff的触发监听器（结算、扣除、移除）
提供按单位/阵营查询Buff的接口
实现Buff免疫和清除逻辑
4. BattleBullet.lua
核心功能：子弹系统
管理战斗中的子弹实体
处理子弹移动、碰撞检测和伤害计算
支持直线移动和定向移动两种类型
关键类：bullet（子弹实例）
5. BattleBurst.lua
核心功能：爆发技能系统
管理能量积累和爆发技能释放
处理爆发技能的目标选择和卡牌消耗
实现爆发技能的连锁触发效果
关键类：burst（爆发技能实例）
6. BattleAction.lua
核心功能：战斗动作处理
处理单位状态转换（站立、移动、攻击等）
管理技能释放和伤害计算
实现反击、吸收、治疗等战斗效果
包含战斗开始和结束的处理逻辑
7. BattleActionDisplay.lua
核心功能：战斗表现系统
处理技能特效、音效、语音的播放
管理受击表现和数字飘字
实现屏幕震动等视觉反馈
处理模型状态切换和动画播放
8. BattleAxisWindow.lua
核心功能：战斗时间轴界面
显示战斗时间轴和技能释放记录
提供技能详情查看功能
支持按类型筛选显示内容
实现回合制战斗的数据展示
9. BattleBackground.lua
核心功能：战斗背景管理
加载和显示战斗场景背景
管理背景音乐和环境音效
处理场景光照和特效层级
10. BattleBomb.lua
核心功能：炸弹系统
管理炸弹类型技能的效果
处理炸弹的引爆和范围伤害
实现炸弹的连锁反应效果
关键类：bomb（炸弹实例）
系统交互关系
核心循环：BattleAction驱动状态更新 → 调用BattleBuffMgr处理Buff → 触发BattleActionDisplay表现效果
技能系统：BattleBurst爆发技能 → 生成BattleBullet/BattleBomb → 通过BattleBuffMgr附加效果
数据展示：BattleAxisWindow从各模块收集数据 → 提供战斗回放功能
资源管理：BattleBackground和BattleActionDisplay协同处理视觉和听觉表现
关键设计特点
状态驱动：基于状态机管理战斗单位行为
事件监听：通过监听器模式实现模块间解耦
配置化：大量使用表配置驱动技能和效果逻辑
帧同步：基于固定帧率实现战斗逻辑更新
这个战斗系统采用了模块化设计，各司其职，通过事件和管理器进行协调，适合复杂的技能和Buff效果实现。
